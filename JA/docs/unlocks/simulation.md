# シミュレーション

シミュレーションを使うと、実際の農場の状態を変えずにコードを素早くテストできます。
シミュレーションの開始時の状態は自由に選べます。また、シミュレーションが終わると、実際の農場はシミュレーション開始前の正確な状態に戻ります。

`simulate()` 関数はシミュレーションを開始するために使います。

実行を開始するファイル
`filename = "f1"`

すべての機能がアンロックされ、フルアップグレードされた状態で開始
`sim_unlocks = Unlocks`

10000個のにんじんと50個の干し草で開始
`sim_items = {Items.Carrot : 10000, Items.Hay : 50}`

値が13のグローバル変数 "a" で開始
`sim_globals = {"a" : 13}`

固定のランダムシードを使用
`seed = 0`

シミュレーションを64倍速にする
`speedup = 64`

シミュレーションを実行
`run_time = simulate(filename, sim_unlocks, sim_items, sim_globals, seed, speedup)`

`simulate()` 関数は、指定されたスタートファイルをシミュレートするのにかかった時間を秒で返します。

### ファイル名
シミュレーション関数の最初の引数はファイル名です。これはコードウィンドウの一番上に表示される名前です。シミュレーションは、指定されたファイルを実行ボタンをクリックしたかのように実行します。

### 開始時のアンロック
ループ、if文、リスト、dictなどの全てのプログラミング機能は常にアンロックされたままです。

2つ目の引数では、プログラミング機能に加えて、シミュレーションが開始されるときにどのアンロック/アップグレードをスタートさせるかを指定できます。これはアンロックのシーケンスであるべきです。シミュレーションはシーケンス内のすべてのアンロックが最大レベルにアップグレードされた状態で開始します。

最大以外のアップグレードレベルを指定したい場合は、アンロックをレベルにマップする辞書を渡すことができます。この場合、負の値は最大アンロックレベルを表します。

### 開始時のアイテム
3つ目の引数では、アイテムを数字にマップする辞書を渡すことができます。これはシミュレーション開始時のアイテムを指定します。

### 開始時のグローバル変数
シミュレーションが新しいプログラム実行を開始するため、シミュレーションを開始するプログラムの変数にはアクセスできません。しかし、4つ目の引数を使ってシミュレーションに値を渡すことは可能です。これは変数名を文字列の形で値にマップする辞書です。これらの変数はシミュレーション内でグローバルスコープに追加されます。

これはすべての値をコピーするため、シミュレーション内で変更しても外部のオリジナルの値には影響を与えません。シミュレーションから時間以外の値を返すことは不可能です。

### ランダムシード
5つ目の引数では、シミュレーションで使用するランダムシードを指定できます。これは正の整数でなければなりません。負の値はランダムシードが使用されます。

ランダムシードは植物の成長時間から迷路の配置、水の減衰時間まで全てに影響を与えます。同じランダムシードと開始条件で同じシミュレーションを複数回開始すると、結果は常に同じになるはずです。

### スピードアップ
6つ目の引数はシミュレーション開始時のスピードアップです。これにより、物事を素早くテストできます。ゲームが設定された速度に追いつけない場合、自動的にスローダウンします。

スピードアップはシミュレーションの結果にはまったく影響を与えません。待ち時間を減らすためだけに存在しています。