# 미로
`Items.Weird_Substance`는 식물을 [비료 주기](docs/unlocks/fertilizer.md)하여 얻을 수 있으며, 덤불에 이상한 효과를 줍니다. 드론이 덤불 위에 있을 때 `use_item(Items.Weird_Substance, amount)`를 호출하면 덤불이 미로로 자랍니다.
미로의 크기는 사용된 `Items.Weird_Substance`의 양(즉, `use_item()` 호출의 두 번째 인수)에 따라 달라집니다.
미로 업그레이드가 없으면, `n`개의 `Items.Weird_Substance`를 사용하면 `n`x`n` 미로가 만들어집니다. 각 미로 업그레이드 레벨마다 동일한 효과를 얻으려면 추가로 `n`개의 `Items.Weird_Substance`를 사용해야 합니다.
전체 밭 미로를 만들려면:

`plant(Entities.Bush)
n_substance = get_world_size() * num_unlocked(Unlocks.Mazes)
use_item(Items.Weird_Substance, n_substance)`

드론이 왜 낮아 보이는 울타리 위를 날 수 없는지는 이유를 모르겠네요.

미로 속 어딘가에 보물이 숨겨져 있습니다. `harvest()`를 사용하여 보물에서 미로의 면적만큼의 금을 얻을 수 있습니다. (예: 5x5 미로는 25 금을 제공합니다.)

다른 곳에서 `harvest()`를 사용하면 미로가 사라집니다.

`get_entity_type()`은 드론이 보물 위에 있을 경우 `Entities.Treasure`와 같고, 미로 내 다른 곳에서는 `Entities.Hedge`와 같습니다.

미로는 재사용하지 않는 이상 루프를 포함하지 않습니다(아래에서 미로 재사용 방법 보기). 따라서 드론이 돌아가지 않고 동일한 위치에 도달할 수 없습니다.

벽이 있는지 확인하려면 벽을 통과하려고 시도할 수 있습니다.
`move()`는 성공하면 `True`를 반환하고 그렇지 않으면 `False`를 반환합니다.

보물 위치를 찾는 방법을 모르겠다면 힌트 1을 확인해 보세요. 이와 같은 문제를 접근하는 방법을 알려줍니다.

추가 도전을 위해 보물에 동일한 양의 `Items.Weird_Substance`를 다시 사용하여 미로를 재사용할 수 있습니다.
이렇게 하면 보물의 금이 한 미로만큼 늘어나고, 보물이 미로 내 무작위 위치로 이동합니다.

보물에서 `measure()`를 사용하면 이동할 위치가 튜플로 반환됩니다.
`next_x, next_y = measure()`

보물이 이동할 때마다 미로에서 무작위로 선택된 벽이 제거될 수 있습니다. 따라서 재사용된 미로는 루프를 포함할 수 있습니다.

미로의 루프가 있으면 같은 위치에 돌아갈 수 있으므로 훨씬 더 어려워집니다. 미로 재사용은 수확하고 새로운 미로를 생성하는 것보다 금을 더 많이 주지 않습니다. 이것은 그냥 건너뛸 수 있는 100% 추가 도전입니다. 추가 정보와 지름길이 미로를 더 빠르게 해결하는 데 도움된다면 그때만 가치가 있습니다.

같은 미로는 최대 300번까지 해결할 수 있습니다. 이는 299번 재배치에 해당합니다. 이후에는 보물에 이상한 물질을 사용해도 더 이상 금이 늘어나지 않으며, `measure()`는 `None`을 반환합니다.

<spoiler=show hint 1>문제를 해결하는 일반적인 접근 방법은 다음과 같습니다:

미로를 만들고 자신이 드론이라고 상상해보세요.

미로 안에 있을 때 어떻게 보물을 찾을지 생각해보세요.

다른 사람이 생각하지 않고도 따라할 수 있도록 전략을 단계별로 적어보세요.

이제 단계들을 코드로 변환해보세요.
</spoiler>
<spoiler=show hint 2>루프가 없는 동안에는: 모든 벽은 실제로 하나의 큰 연결된 벽일 뿐입니다. 벽을 따라가면 미로 전체를 안내할 것입니다.
이 방법은 코드가 매우 적게 필요하며 이미 가본 곳을 기록할 필요도 없습니다. 약 10줄의 코드면 충분합니다.</spoiler>
<spoiler=show hint 3>드론을 동서남북 같은 절대적인 방향으로 이동하는 대신 "오른쪽으로 돌기"나 "왼쪽으로 돌기" 같은 상대적인 방향으로 이동하는 것이 매우 유용할 수 있습니다. 이를 위해서 드론이 현재 이동하는 방향을 추적해야 합니다. 드론은 실제로 회전하지 않지만 코드에서는 "가상" 회전을 유지할 수 있습니다.
다음 인덱스 트릭이 도움이 됩니다:

`directions = [North, East, South, West]
index = 0`

`% 4`를 사용하여 "원형"으로 회전할 수 있습니다. 그래서 `West` 다음은 `North`로 다시 감쌉니다.
`# turn right
index = (index + 1) % 4`

`# turn left
index = (index - 1) % 4

move(directions[index])`</spoiler>
<spoiler=show hint 4>풀 수 없다면, 항상 더 비효율적이긴 하지만 쉽게 해결할 수 있습니다.
`1`x`1` 미로를 푸는 것은 쉬운 일입니다.</spoiler>