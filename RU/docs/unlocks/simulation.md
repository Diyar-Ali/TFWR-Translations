# Симуляция

Симуляции позволяют быстро тестировать код без изменения состояния настоящей фермы. Начальное состояние симуляции можно выбрать произвольно, и когда симуляция закончится, настоящая ферма будет в том же состоянии, в котором была до начала симуляции.

Функция `simulate()` используется для запуска симуляции.

файл, с которого должно начаться выполнение
`filename = "f1"`

начать, когда все разблокировано и полностью улучшено
`sim_unlocks = Unlocks`

начать с 10000 морковок и 50 сена
`sim_items = {Items.Carrot : 10000, Items.Hay : 50}`

начать с глобальной переменной "a", со значением 13
`sim_globals = {"a" : 13}`

использовать фиксированное случайное начальное значение
`seed = 0`

ускорить симуляцию в 64 раза
`speedup = 64`

запустить симуляцию
`run_time = simulate(filename, sim_unlocks, sim_items, sim_globals, seed, speedup)`

Функция `simulate()` возвращает время в секундах, которое потребовалось для симуляции указанного стартового файла.

### Имя файла
Первый аргумент функции simulate — это имя файла. Это имя, которое отображается в верхней части окна кода. Симуляция запустит указанный файл так, как будто вы нажали на нем кнопку Execute.

### Начальные Разблокировки
Все программные функции, такие как циклы, условия, списки, dicts,... всегда остаются разблокированными.

Второй аргумент позволяет указать, с какими разблокировками/улучшениями начнется симуляция, помимо программных функций. Это должна быть последовательность разблокировок. Симуляция начнется, когда все указанные разблокировки будут улучшены до их максимального уровня.

Если вы хотите указать уровень улучшения, отличный от максимального, вы можете передать dictionary, который связывает разблокировки с уровнями разблокировки. В этом случае отрицательные значения соответствуют максимальному уровню разблокировки.

### Начальные Элементы
Третий аргумент позволяет передать dictionary, который связывает элементы с числами. Он указывает, с какими элементами начать симуляцию.

### Начальные Глобальные
Поскольку симуляция запускает полностью новое выполнение программы, вы не можете получить доступ к переменным из программы, которая запускает симуляцию. Однако можно передать значения в симуляцию, используя четвертый аргумент. Это dict, который связывает имена переменных в виде строк со значениями. Эти переменные затем добавляются в глобальную область выполнения внутри симуляции.

Обратите внимание, что это копирует все значения, так что их изменение внутри симуляции не повлияет на исходные значения вне симуляции. Невозможно вернуть значения из симуляции, кроме времени, затраченного на выполнение.

### Случайное Начальное Значение
Пятый аргумент позволяет указать случайное начальное значение, используемое в симуляции. Это должно быть положительное целое число. Отрицательные значения приведут к использованию случайного начального значения.

Случайное начальное значение влияет на все, от времени роста растений до структуры лабиринтов и времени разложения воды. Если вы запускаете одну и ту же симуляцию несколько раз с одним и тем же случайным начальным значением и теми же исходными условиями, результат всегда должен быть одинаковым.

### Ускорение
Шестой аргумент — это начальное ускорение симуляции. Это позволяет быстро тестировать различные вещи. Если игра не может следовать заданной скорости, она будет автоматически замедляться.

Ускорение никак не влияет на результат симуляции. Оно существует только для сокращения времени ожидания.